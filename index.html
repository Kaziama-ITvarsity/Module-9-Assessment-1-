<!DOCTYPE html>
<html>
  <head>
    <title>Countdown Timer App</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    
      <div class="container">
        <h3>Countdown Timer</h3>
        <svg id="progressBarContainer" width="144" height="300">

          <defs>
            <pattern id="pattern1"  x="0" y="0" width="12" height="12" patternUnits="userSpaceOnUse">
              <circle  cx="5" cy="5" r="3" stroke="0"  fill="rgb(21, 21, 100)"/>
            </pattern>
          </defs>

          <rect id="progressBar" x="0" y="0" width="144" height="300"  style="fill: url(#pattern1)"/>
          

        </svg>

        <div id="clock">
          <p>Ready!</p>

        </div>
        <div id="content">
          <select class="selector" id="hours">
            <option value="0">0 hours </option>
            <option value="1">1 hours </option>
            <option value="2">2 hours </option>
            <option value="3">3 hours </option>
            <option value="4">4 hours </option>
            <option value="5">5 hours </option>
            <option value="6">6 hours </option>
            <option value="7">7 hours </option>
            <option value="8">8 hours </option>
            <option value="9">9 hours </option>
            <option value="10">10 hours </option>
            <option value="11">11 hours </option>
            <option value="12">12 hours </option>
            <option value="13">13 hours </option>
            <option value="14">14 hours </option>
            <option value="15">15 hours </option>
            <option value="16">16 hours </option>
            <option value="17">17 hours </option>
            <option value="18">18 hours </option>
            <option value="19">19 hours </option>
            <option value="20">20 hours </option>
            <option value="21">21 hours </option>
            <option value="22">22 hours </option>
            <option value="23">23 hours </option>
          </select>

          <select class="selector" id="minutes">
            <option value="0">0 minutes </option>
            <option value="1">1 minutes </option>
            <option value="2">2 minutes </option>
            <option value="3">3 minutes </option>
            <option value="4">4 minutes </option>
            <option value="5">5 minutes </option>
            <option value="6">6 minutes </option>
            <option value="7">7 minutes </option>
            <option value="8">8 minutes </option>
            <option value="9">9 minutes </option>
            <option value="10">10 minutes </option>
            <option value="11">11 minutes </option>
            <option value="12">12 minutes </option>
            <option value="13">13 minutes </option>
            <option value="14">14 minutes </option>
            <option value="15">15 minutes </option>
            <option value="16">16 minutes </option>
            <option value="17">17 minutes </option>
            <option value="18">18 minutes </option>
            <option value="19">19 minutes </option>
            <option value="20">20 minutes </option>
            <option value="21">21 minutes </option>
            <option value="22">22 minutes </option>
            <option value="23">23 minutes </option>
            <option value="24">24 minutes </option>
            <option value="25">25 minutes </option>
            <option value="26">26 minutes </option>
            <option value="27">27 minutes </option>
            <option value="28">28 minutes </option>
            <option value="29">29 minutes </option>
            <option value="30">30 minutes </option>
            <option value="31">31 minutes </option>
            <option value="32">32 minutes </option>
            <option value="33">33 minutes </option>
            <option value="34">34 minutes </option>
            <option value="35">35 minutes </option>
            <option value="36">36 minutes </option>
            <option value="37">37 minutes </option>
            <option value="38">38 minutes </option>
            <option value="39">39 minutes </option>
            <option value="40">40 minutes </option>
            <option value="41">41 minutes </option>
            <option value="42">42 minutes </option>
            <option value="43">43 minutes </option>
            <option value="44">44 minutes </option>
            <option value="45">45 minutes </option>
            <option value="46">46 minutes </option>
            <option value="47">47 minutes </option>
            <option value="48">48 minutes </option>
            <option value="49">49 minutes </option>
            <option value="50">50 minutes </option>
            <option value="51">51 minutes </option>
            <option value="52">52 minutes </option>
            <option value="53">53 minutes </option>
            <option value="54">54 minutes </option>
            <option value="55">55 minutes </option>
            <option value="56">56 minutes </option>
            <option value="57">57 minutes </option>
            <option value="58">58 minutes </option>
            <option value="59">59 minutes </option>
          </select>

          <select class="selector" id="secondes">
            <option value="0">0 secondes </option>
            <option value="1">1 secondes </option>
            <option value="2">2 secondes </option>
            <option value="3">3 secondes </option>
            <option value="4">4 secondes </option>
            <option value="5">5 secondes </option>
            <option value="6">6 secondes </option>
            <option value="7">7 secondes </option>
            <option value="8">8 secondes </option>
            <option value="9">9 secondes </option>
            <option value="10">10 secondes </option>
            <option value="11">11 secondes </option>
            <option value="12">12 secondes </option>
            <option value="13">13 secondes </option>
            <option value="14">14 secondes </option>
            <option value="15">15 secondes </option>
            <option value="16">16 secondes </option>
            <option value="17">17 secondes </option>
            <option value="18">18 secondes </option>
            <option value="19">19 secondes </option>
            <option value="20">20 secondes </option>
            <option value="21">21 secondes </option>
            <option value="22">22 secondes </option>
            <option value="23">23 secondes </option>
            <option value="24">24 secondes </option>
            <option value="25">25 secondes </option>
            <option value="26">26 secondes </option>
            <option value="27">27 secondes </option>
            <option value="28">28 secondes </option>
            <option value="29">29 secondes </option>
            <option value="30">30 secondes </option>
            <option value="31">31 secondes </option>
            <option value="32">32 secondes </option>
            <option value="33">33 secondes </option>
            <option value="34">34 secondes </option>
            <option value="35">35 secondes </option>
            <option value="36">36 secondes </option>
            <option value="37">37 secondes </option>
            <option value="38">38 secondes </option>
            <option value="39">39 secondes </option>
            <option value="40">40 secondes </option>
            <option value="41">41 secondes </option>
            <option value="42">42 secondes </option>
            <option value="43">43 secondes </option>
            <option value="44">44 secondes </option>
            <option value="45">45 secondes </option>
            <option value="46">46 secondes </option>
            <option value="47">47 secondes </option>
            <option value="48">48 secondes </option>
            <option value="49">49 secondes </option>
            <option value="50">50 secondes </option>
            <option value="51">51 secondes </option>
            <option value="52">52 secondes </option>
            <option value="53">53 secondes </option>
            <option value="54">54 secondes </option>
            <option value="55">55 secondes </option>
            <option value="56">56 secondes </option>
            <option value="57">57 secondes </option>
            <option value="58">58 secondes </option>
            <option value="59">59 secondes </option>
          </select>
        </div>

        <div class="buttonSection">
          <div class="button1">
            <button class="roundButton" id="start">Start</button>
          </div>
          <div class="button2">
            <button class="roundButton" id="cancel">Cancel</button>
          </div>
        </div>


      </div>

    <script>

      document.getElementById('start').addEventListener('click', startTimer);
      document.getElementById('cancel').addEventListener('click', cancelledBtnPressed);

      let startTime;
      let endTime;
      let origtimePeriod;
      let newTimePeriod;
      let timer;
      let cancelled = false

      function startTimer(){
        cancelled = false
        startTime = new Date();
        endTime = getEndTime();
        origtimePeriod = endTime.getTime() - startTime.getTime();
        newTimePeriod = origtimePeriod

        timer = setInterval (displayCountdown , 1000)
      }

      function msToTime(milliseconds){
        let mHour = 1000 * 60 *60;
        let mMinute = 1000 * 60;
        let mSecond = 1000;

        let hours = Math.floor(milliseconds / mHour);
        let minutes = Math.floor((milliseconds % mHour) / mMinute);
        let seconds = Math.floor((milliseconds % mMinute) / mSecond);

        let time = [];
        time["hours"] = hours;
        time["minutes"] = minutes;
        time["seconds"] = seconds;

        return time;
      }

      function displayCountdown (){

        let timeLeft = msToTime(newTimePeriod)
        document.getElementById('clock').innerHTML = `<p>${timeLeft["hours"]}h ${timeLeft["minutes"]}m ${timeLeft["seconds"]}s</p>`;

        let newHeight = Math.floor(newTimePeriod / origtimePeriod * 100) * 3;
        document.getElementById('progressBar').setAttribute("height", newHeight);
          newTimePeriod -=1000

        if (newTimePeriod <0 || cancelled){
          clearInterval(timer);
          document.getElementById('clock').innerHTML = "Complete"
        }
      }
      
      function cancelledBtnPressed(){
        cancelled = true;
      }

      function getEndTime(){
        let now = new Date();
        let hours = parseInt(document.getElementById('hours').value);
        let minutes = parseInt(document.getElementById('minutes').value);
        let secondes = parseInt(document.getElementById('secondes').value);

        now.setHours(now.getHours() + hours)
        now.setMinutes(now.getMinutes() + minutes)
        now.setSeconds(now.getSeconds() + secondes)
        return now;
      }
    </script>
      

  </body>
</html>